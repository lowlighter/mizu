<div class="demo loading" *set="{ demo: { browsers: ['iife', 'esm'], bun: ['ssr', 'ssg'], node: ['ssr', 'ssg'], deno: ['ssr', 'ssg'] } }" data-color-scheme="dark">
  <div class="mockups">
    <div class="mockup runtime">
      <div class="tabs">
        <img *for="['deno', 'node', 'bun']" class="app-icon" :src="`https://lecoq.io/cdn/logos/${$value}.svg`" :data-demo-for-runtime="$value" alt="" />
        <div class="tab fake"><small>File</small></div>
        <div class="tab fake hide-small"><small>Edit</small></div>
        <div class="tab fake hide-small"><small>View</small></div>
        <div class="tab fake hide-small"><small>Run</small></div>
        <div class="tab fake"><small>Terminal</small></div>
        <div class="tab fake hide-small"><small>Help</small></div>
        <div class="grow"></div>
        <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14">
          <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
            <circle cx="6" cy="6" r="6.5" fill="var(--danger)"></circle>
            <circle cx="26" cy="6" r="6.5" fill="var(--attention)"></circle>
            <circle cx="46" cy="6" r="6.5" fill="var(--success)"></circle>
          </g>
        </svg>
      </div>
      <div class="tabs">
        <i class="fake" %http="https://lecoq.io/cdn/octicons/three-bars-24.svg" %response.swap></i>
        <div *for="demo.deno" class="tab" :data-demo-tab="`deno-${$value}`" data-demo-for-runtime="deno" *mustache>{{ $value }}.ts</div>
        <div *for="demo.node" class="tab" :data-demo-tab="`node-${$value}`" data-demo-for-runtime="node" *mustache>{{ $value }}.mjs</div>
        <div *for="demo.bun" class="tab" :data-demo-tab="`bun-${$value}`" data-demo-for-runtime="bun" *mustache>{{ $value }}.ts</div>
      </div>
      <div class="app-view">
        <div class="runtime-view">
          <pre *for="demo.deno" :data-demo-for-tab="`deno-${$value}`" data-demo-for-runtime="deno" class="usage-snippet"><code *code[ts] %http="`/html/mizu/examples/deno/${$value}.ts`" %response.text></code></pre>
          <pre
            *for="demo.deno"
            :data-demo-for-tab="`deno-${$value}`"
            data-demo-for-runtime="deno"
            class="lines"
          ><code %http="`/html/mizu/examples/deno/${$value}.ts`" %response.text="this.textContent = $content.split(`\n`).slice(1).map((_, i) => i+1).join(&quot;\n&quot;)"></code></pre>
          <pre *for="demo.node" :data-demo-for-tab="`node-${$value}`" data-demo-for-runtime="node" class="usage-snippet"><code *code[js] %http="`/html/mizu/examples/node/${$value}.mjs`" %response.text></code></pre>
          <pre
            *for="demo.node"
            :data-demo-for-tab="`node-${$value}`"
            data-demo-for-runtime="node"
            class="lines"
          ><code %http="`/html/mizu/examples/node/${$value}.mjs`" %response.text="this.textContent = $content.split(`\n`).slice(1).map((_, i) => i+1).join(&quot;\n&quot;)"></code></pre>
          <pre *for="demo.bun" :data-demo-for-tab="`bun-${$value}`" data-demo-for-runtime="bun" class="usage-snippet"><code *code[ts] %http="`/html/mizu/examples/bun/${$value}.ts`" %response.text="this.textContent = $content.replace(/^.. @ts-expect-error.*/m, '')"></code></pre>
          <pre
            *for="demo.bun"
            :data-demo-for-tab="`bun-${$value}`"
            data-demo-for-runtime="bun"
            class="lines"
          ><code %http="`/html/mizu/examples/bun/${$value}.ts`" %response.text="this.textContent = $content.split(`\n`).slice(1).map((_, i) => i+1).join(&quot;\n&quot;)"></code></pre>
        </div>
        <div class="runtime-terminal">
          <div class="tabs">
            <div class="tab"><span>Terminal</span></div>
            <div class="tab fake">Output</div>
            <div class="tab fake">Ports</div>
          </div>
          <div class="terminal">
            <pre class="prompt"><code><span class="hide-small">dev@mizu:~</span> $</code></pre>
            <pre data-demo-for-runtime="deno" class="usage-snippet">deno add jsr:@mizu/render</pre>
            <pre data-demo-for-runtime="node" class="usage-snippet">npx jsr add @mizu/render</pre>
            <pre data-demo-for-runtime="bun" class="usage-snippet">bunx jsr add @mizu/render</pre>
          </div>
        </div>
      </div>
    </div>
    <div class="mockup browser" data-demo-for-runtime="browsers">
      <div class="tabs">
        <img class="app-icon" src="https://lecoq.io/cdn/logos/browsers.svg" alt="" />
        <div *for="demo.browsers" class="tab" :data-demo-tab="`browsers-${$value}`" *mustache>
          {{ {iife:"IIFE", esm:"ESM"}[$value] }}
          <div class="before"></div>
          <div class="after"></div>
        </div>
        <div class="grow"></div>
        <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14">
          <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
            <circle cx="6" cy="6" r="6.5" fill="var(--danger)"></circle>
            <circle cx="26" cy="6" r="6.5" fill="var(--attention)"></circle>
            <circle cx="46" cy="6" r="6.5" fill="var(--success)"></circle>
          </g>
        </svg>
      </div>
      <div class="urlbar">
        <i class="fake" %http="https://lecoq.io/cdn/octicons/arrow-left-24.svg" %response.swap></i>
        <i class="fake" style="transform: scaleX(-1)" %http="https://lecoq.io/cdn/octicons/sync-24.svg" %response.swap></i>
        <input *for="demo.browsers" class="fake" type="text" :value="`https://mizu.test/${$value}.html`" :data-demo-for-tab="`browsers-${$value}`" />
        <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/star-24.svg" %response.swap></i>
        <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/three-bars-24.svg" %response.swap></i>
      </div>
      <div class="app-view">
        <div class="browser-view">
          ðŸŒŠ Yaa, mizu!
        </div>
        <div class="browser-inspector">
          <div class="browser-inspector-bar">
            <i class="fake" %http="https://lecoq.io/cdn/octicons/link-external-16.svg" %response.swap></i>
            <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/device-mobile-16.svg" %response.swap></i>
            <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/sidebar-collapse-16.svg" %response.swap></i>
            <div class="active">
              <i %http="https://lecoq.io/cdn/octicons/code-16.svg" %response.swap></i>
              <small>Elements</small>
            </div>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/bug-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/terminal-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/broadcast-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/meter-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/cpu-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/browser-16.svg" %response.swap></i>
          </div>
          <div class="browser-inspector-content">
            <pre *for="demo.browsers" :data-demo-for-tab="`browsers-${$value}`" class="usage-snippet"><code *code[html] %http="`/html/mizu/examples/browsers/${$value}.html`" %response.text></code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dock">
    <div *for="['browsers', 'deno', 'node', 'bun']" :data-demo-runtime="$value">
      <img :src="`https://lecoq.io/cdn/logos/${$value}.svg`" :alt="$value" />
    </div>
  </div>
</div>
<script>
  window.addEventListener("load", function () {
    const data = { runtime: "", tab: "" }
    for (const key of Object.keys(data)) {
      document.querySelectorAll(`[data-demo-${key}]`).forEach((element) => {
        element.addEventListener("click", () => {
          if ((key === "runtime") && (data.runtime !== element.getAttribute(`data-demo-${key}`))) {
            const selector = element.getAttribute(`data-demo-${key}`) === "browsers" ? ".mockup.browser [data-demo-tab]" : `.mockup.runtime [data-demo-tab][data-demo-for-runtime="${element.getAttribute(`data-demo-${key}`)}"]`
            document.querySelector(selector)?.click()
          }
          data[key] = element.getAttribute(`data-demo-${key}`)
          document.querySelectorAll(`[data-demo-for-${key}]`).forEach((element) => {
            if (Object.keys(data).every((key) => (element.getAttribute(`data-demo-for-${key}`) === data[key]) || (!element.hasAttribute(`data-demo-for-${key}`)))) {
              element.style.removeProperty("display")
            } else {
              element.style.setProperty("display", "none", "important")
            }
          })
          document.querySelectorAll(".dock > *").forEach((element) => element.classList.toggle("active", element.getAttribute("data-demo-runtime") === data.runtime))
          document.querySelectorAll(".tab[data-demo-tab]").forEach((element) => element.classList.toggle("active", element.getAttribute("data-demo-tab") === data.tab))
        })
      })
    }
    document.querySelector(`[data-demo-runtime]`).click()
    document.querySelector(".demo").classList.remove("loading")
  })
</script>
<div class="flash accent">
  <p>Want to see <em>mizu.js</em> in action?</p>
  <p>Dive into our <a href="/playground"><b>interactive playground</b></a> and start experimenting!</p>
</div>
