<div class="demo loading" *set="{ demo: { browsers: ['iife', 'esm'], deno: ['ssr', 'ssg'] } }" data-color-scheme="dark">
  <div class="mockups">
    <div class="mockup runtime">
      <div class="tabs">
        <img *for="['deno', 'node', 'bun']" class="app-icon" :src="`https://lecoq.io/cdn/logos/${$value}.svg`" :data-demo-for-runtime="$value" />
        <div class="tab fake"><small>File</small></div>
        <div class="tab fake hide-small"><small>Edit</small></div>
        <div class="tab fake hide-small"><small>View</small></div>
        <div class="tab fake hide-small"><small>Run</small></div>
        <div class="tab fake"><small>Terminal</small></div>
        <div class="tab fake hide-small"><small>Help</small></div>
        <div class="grow"></div>
        <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14">
          <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
            <circle cx="6" cy="6" r="6.5" fill="var(--danger)"></circle>
            <circle cx="26" cy="6" r="6.5" fill="var(--attention)"></circle>
            <circle cx="46" cy="6" r="6.5" fill="var(--success)"></circle>
          </g>
        </svg>
      </div>
      <div class="tabs">
        <i class="fake" %http="https://lecoq.io/cdn/octicons/three-bars-24.svg" %response.swap></i>
        <div *for="demo.deno" class="tab" :data-demo-tab="`deno-${$value}`" *mustache>{{ $value }}.ts</div>
      </div>
      <div class="app-view">
        <div class="runtime-view">
          <pre *for="demo.deno" :data-demo-for-tab="`deno-${$value}`" class="usage-snippet"><code *code[ts] %http="`/html/mizu/examples/deno/${$value}.ts`" %response.text="this.textContent = $content.replace(/^\/\/ deno-lint-ignore.*\n/gm, '')"></code></pre>
          <pre *for="demo.deno" :data-demo-for-tab="`deno-${$value}`" class="lines"><code %http="`/html/mizu/examples/deno/${$value}.ts`" %response.text="this.textContent = $content.split(`\n`).slice(1).map((_, i) => i).join(&quot;\n&quot;)"></code></pre>
        </div>
        <div class="runtime-terminal">
          <div *for="demo.deno" :data-demo-for-tab="`deno-${$value}`" *mustache><span class="accent">/workspaces/mizu</span> $ deno {{ {ssr:'serve', ssg:'run'}[$value] }} examples/{{ $value }}.ts</div>
          <div data-demo-for-tab="deno-ssr">
            <span class="success">deno serve</span>: Listening on <span class="attention">http://0.0.0.0:8000/</span>
          </div>
          <div data-demo-for-tab="deno-ssg">
            <span class="fg-accent">INFO</span> output:<span class="success">"/tmp/output"</span>
            <span class="success">"generating..."</span>
          </div>
          <div data-demo-for-tab="deno-ssg">
            <span class="fg-success">OK&nbsp;&nbsp;</span>
            <span class="success">"done!"</span>
          </div>
        </div>
      </div>
    </div>
    <div class="mockup browser" data-demo-for-runtime="browsers">
      <div class="tabs">
        <img class="app-icon" src="https://lecoq.io/cdn/logos/browsers.svg" />
        <div *for="demo.browsers" class="tab" :data-demo-tab="`browsers-${$value}`" *mustache>
          {{ {iife:"IIFE", esm:"ESM"}[$value] }}
          <div class="before"></div>
          <div class="after"></div>
        </div>
        <div class="grow"></div>
        <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="54" height="14" viewBox="0 0 54 14">
          <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
            <circle cx="6" cy="6" r="6.5" fill="var(--danger)"></circle>
            <circle cx="26" cy="6" r="6.5" fill="var(--attention)"></circle>
            <circle cx="46" cy="6" r="6.5" fill="var(--success)"></circle>
          </g>
        </svg>
      </div>
      <div class="urlbar">
        <i class="fake" %http="https://lecoq.io/cdn/octicons/arrow-left-24.svg" %response.swap></i>
        <i class="fake" %http="https://lecoq.io/cdn/octicons/arrow-right-24.svg" %response.swap></i>
        <input *for="demo.browsers" class="fake" type="text" :value="`https://mizu.test/${$value}.html`" :data-demo-for-tab="`browsers-${$value}`" />
        <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/star-24.svg" %response.swap></i>
        <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/three-bars-24.svg" %response.swap></i>
      </div>
      <div class="app-view">
        <div class="browser-view">
          ðŸŒŠ Yaa, mizu!
        </div>
        <div class="browser-inspector">
          <div class="browser-inspector-bar">
            <i class="fake" %http="https://lecoq.io/cdn/octicons/link-external-16.svg" %response.swap></i>
            <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/device-mobile-16.svg" %response.swap></i>
            <i class="fake hide-small" %http="https://lecoq.io/cdn/octicons/sidebar-collapse-16.svg" %response.swap></i>
            <div class="active">
              <i %http="https://lecoq.io/cdn/octicons/code-16.svg" %response.swap></i>
              <small>Elements</small>
            </div>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/terminal-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/bug-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/broadcast-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/meter-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/cpu-16.svg" %response.swap></i>
            <i class="fake" %http="https://lecoq.io/cdn/octicons/browser-16.svg" %response.swap></i>
          </div>
          <div class="browser-inspector-content">
            <pre *for="demo.browsers" :data-demo-for-tab="`browsers-${$value}`" class="usage-snippet"><code *code[html] %http="`/html/mizu/examples/browsers/${$value}.html`" %response.text></code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dock">
    <img *for="['browsers', 'deno']" :data-demo-runtime="$value" :src="`https://lecoq.io/cdn/logos/${$value}.svg`" />
  </div>
</div>
<script>
  window.addEventListener("load", function () {
    const data = { runtime: "", tab: "" }
    for (const key of Object.keys(data)) {
      document.querySelectorAll(`[data-demo-${key}]`).forEach((element) => {
        element.addEventListener("click", () => {
          if ((key === "runtime") && (data.runtime !== element.getAttribute(`data-demo-${key}`))) {
            document.querySelector(`.mockup.${element.getAttribute(`data-demo-${key}`) === "browsers" ? "browser" : "runtime"} [data-demo-tab]`).click()
          }
          data[key] = element.getAttribute(`data-demo-${key}`)
          document.querySelectorAll(`[data-demo-for-${key}]`).forEach((element) => {
            if (element.getAttribute(`data-demo-for-${key}`) === data[key]) {
              element.style.removeProperty("display")
            } else {
              element.style.setProperty("display", "none", "important")
            }
          })
          document.querySelectorAll(".dock img").forEach((element) => element.classList.toggle("active", element.getAttribute("data-demo-runtime") === data.runtime))
          document.querySelectorAll(".tab").forEach((element) => element.classList.toggle("active", element.getAttribute("data-demo-tab") === data.tab))
        })
      })
    }
    document.querySelector(`[data-demo-runtime]`).click()
    document.querySelector(".demo").classList.remove("loading")
  })
</script>
<div class="flash accent">
  <p>Want to see <em>mizu.js</em> in action?</p>
  <p>Dive into our <a href="/playground">interactive playground</a> and start experimenting!</p>
</div>
